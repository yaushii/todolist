{"ast":null,"code":"var _jsxFileName = \"/home/popschool/projets/justine/react/todolist/src/App.js\";\nimport React from 'react';\nimport './App.css';\nimport * as firebase from 'firebase';\nimport config from './config';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      tasks: [],\n      newTask: \"\"\n    };\n\n    this.taskDelete = id => {\n      const tasks = this.state.tasks.slice();\n      const index = tasks.findIndex(task => task.id === id);\n      tasks.splice(index, 1);\n      this.setState({\n        tasks\n      });\n    };\n\n    this.handlesubmit = event => {\n      event.preventDefault(); //empeche la page de se recharger\n      //Crée un nouvelle id avec la date et l'heure et le nom grace a new task\n\n      const id = new Date().getTime();\n      const nom = this.state.newTask;\n      const task = {\n        id,\n        nom\n      };\n      const tasks = this.state.tasks.slice();\n      tasks.push(task);\n      this.setState({\n        tasks\n      });\n      this.setState({\n        newTask: ''\n      });\n    };\n\n    this.handleChange = event => {\n      const value = event.currentTarget.value;\n      this.setState({\n        newTask: value\n      });\n    };\n\n    firebase.initializeApp(config);\n  }\n\n  componentWillMount() {\n    const ref = firebase.database().ref('tasks');\n    ref.on('value', snapshot => this.setState({\n      tasks: snapshot.val()\n    }));\n  }\n\n  saveTask() {\n    firebase.database().ref('tasks').push(this.state.newTask);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }, \"liste de t\\xE2ches\"), React.createElement(\"ul\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, this.state.tasks.map(tasks => React.createElement(\"li\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, tasks.nom, \" \", React.createElement(\"button\", {\n      onClick: () => this.taskDelete(tasks.id),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, \"x\")))), React.createElement(\"form\", {\n      onSubmit: this.handlesubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"text\",\n      onChange: this.handleChange,\n      value: this.state.newTask,\n      placeholder: \"Ajouter une t\\xE2ches\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: this.saveTask,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"fait\")));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/popschool/projets/justine/react/todolist/src/App.js"],"names":["React","firebase","config","App","Component","constructor","state","tasks","newTask","taskDelete","id","slice","index","findIndex","task","splice","setState","handlesubmit","event","preventDefault","Date","getTime","nom","push","handleChange","value","currentTarget","initializeApp","componentWillMount","ref","database","on","snapshot","val","saveTask","render","map"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './App.css';\nimport * as firebase from 'firebase';\nimport config from './config';\n\n\n\n\nclass App extends React.Component{\n\n  constructor() {\n    super()\n    firebase.initializeApp(config)\n  }\n    componentWillMount(){\n      const ref = firebase.database().ref('tasks')\n      ref.on('value', snapshot => (\n        this.setState({\n         tasks: snapshot.val()\n        })\n      ))\n    };\n    \n\n\n\n\n\n  \n  state = {\n    tasks : [\n    \n  ],\n  newTask:\"\"\n};\n\ntaskDelete = id =>{\nconst tasks = this.state.tasks.slice();\nconst index = tasks.findIndex(task=> task.id === id);\n\ntasks.splice(index,1);\n\nthis.setState({ tasks });\n\n};\n\n\n\nhandlesubmit =(event)=> {\n  event.preventDefault();//empeche la page de se recharger\n\n  //Crée un nouvelle id avec la date et l'heure et le nom grace a new task\n  const id = new Date().getTime();\n  const nom = this.state.newTask;\n\n  const task = {id, nom};\n\n  const tasks = this.state.tasks.slice();\n  tasks.push(task);\n  \n  this.setState({ tasks });\n  this.setState({newTask : ''});\n  \n  \n}\n\n\n//permet de modifier le champ du formulaire (via le state)\nhandleChange = (event)=>{\n  const value = event.currentTarget.value;\n  this.setState ({ newTask : value });\n  \n\n}\nsaveTask(){\n  firebase.database().ref('tasks').push(this.state.newTask);\n};\n\n  render(){\n    return(\n    <div>\n    <h1>liste de tâches</h1>\n\n    <ul>\n      {this.state.tasks.map(tasks => (\n        <li>\n          {tasks.nom} <button onClick={() => this.taskDelete(tasks.id)}>x</button>\n        </li>\n        ))}\n    </ul>\n    <form onSubmit={this.handlesubmit}>\n    <input type=\"text\" \n    onChange={this.handleChange}\n    value={this.state.newTask}\n    placeholder=\"Ajouter une tâches\">\n    </input>\n    <button onClick={this.saveTask}>fait</button>\n</form>\n</div>\n  )\n    \n  };\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}